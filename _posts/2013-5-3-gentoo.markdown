---
layout: post
title: Gentoo使用记录 
tags: [tech]
---

##查看cpu

uname -m

##lspci
lspci 是一个用来显示系统中所有PCI总线设备或连接到该总线上的所有设备的工具。 

##什么是PCI

PCI是Peripheral Component Interconnect（外设部件互连标准）的缩写，它是目前个人电脑中使用最为广泛的接口，几乎所有的主板产品上都带有这种插槽。

其颜色一般为乳白色，可插接USB2.0卡 显卡、声卡、网卡、其它种类繁多的扩展卡。插接不同的扩展卡可以获得目前电脑能实现的几乎所有功能，是名副其实的“万用”扩展插槽。

像软件中的API，一个是硬件外部连接标准，一个是软件应用接口。

![lspci](/images/lspci.jpg)
	

##什么是DHCP

DHCP是Dynamic Host Configuration Protocol的缩写，动态主机配置，它是TCP／IP协议簇中的一种，主要是用来给网络客户机分配动态的IP地址。
它分为两个部份﹕一个是服务器端﹐而另一个是客户端。
DHCP 的分配形式

必须至少有一台 DHCP 工作在网络上面﹐它会监听网络的 DHCP 请求﹐并与客户端搓商 TCP/IP 的设定环境。它提供两种 IP 定位方式﹕

###Automatic Allocation

自动分配﹐其情形是﹕一旦 DHCP 客户端第一次成功的从 DHCP 服务器端租用到 IP 地址之后﹐就永远使用这个地址。

###Dynamic Allocation

动态分配﹐当 DHCP 第一次从 HDCP 服务器端租用到 IP 地址之后﹐并非永久的使用该地址﹐只要租约到期﹐客户端就得释放(release)这个 IP 地址﹐以给其它工作站使用。当然﹐客户端可以比其它主机更优先的更新(renew)租约﹐或是租用其它的 IP 地址。

动态分配显然比自动分配更加灵活﹐尤其是当您的实际 IP 地址不足的时候﹐例如﹕您是一家 ISP ﹐只能提供 200 个IP地址用来给拨接客户﹐但并不意味着您的客户最多只能有 200 个。因为要知道﹐您的客户们不可能全部同一时间上网的﹐除了他们各自的行为习惯的不同﹐也有可能是电话线路的限制。这样﹐您就可以将这 200 个地址﹐轮流的租用给拨接上来的客户使用了。这也是为什么当您查看 IP 地址的时候﹐会因每次拨接而不同的原因了(除非您申请的是一个固定 IP ﹐通常的 ISP 都可以满足这样的要求﹐这或许要另外收费)。当然﹐ISP 不一定使用 DHCP 来分配地址﹐但这个概念和使用 IP Pool 的原理是一样的。

##traceroute

使用man traceroute查看文档帮助

traceroute www.zhuyinghao.com

记录按序列号从1开始，每个纪录就是一跳 ，每跳表示一个网关，我们看到每行有三个时间，单位是 ms，其实就是-q的默认参数。探测数据包向每个网关发送三个数据包后，网关响应后返回的时间；如果您用 traceroute -q 4 www.zhuyinghao.com ，表示向每个网关发送4个数据包；

有时我们traceroute 一台主机时，会看到有一些行是以星号表示的。出现这样的情况，可能是防火墙封掉了ICMP的返回信息，所以我们得不到什么相关的数据包返回数据。

通过http://www.ip138.com查询每个ip是电信还是联通等等。

##Live CD/stage3/minimized CD的区别


LiveCD包含了所有需要的文件,包括系统,各种软件等等,直接用它的话就等于失去了自己编译安装的意义了

stage3是一个含有最小Gentoo环境的压缩包,有了它就可以自行编译安装系统了

minimized CD是用来安装的gentoo的引导ISO,用它可以从只有硬盘,无操作系统的计算机里启动gentoo的安装

##IP,Netmask,broadcast,网关,DNS

在一个网络中，所有主机都通过IP地址（互联网协议地址）来识别。一个这种地址是由四个0到255之间的整数组合成的

个IP地址由32个比特（0和1）组成

IP地址（整数）：   192.168.0.2

IP地址（位）：     11000000 10101000 00000000 00000010

为了区别一个网络内部和外部的主机，IP地址被分为两个部分：网络部分和主机部分。

子网掩码用来描述这种区分，它由一系列的1跟随着一系列的0组成。IP中映射在1上的部分为网络部分，另一部分为主机部分。照例，子网掩码可以描述为IP地址的形式。

IP地址：        192      168      0         2

				11000000 10101000 00000000 00000010

子网掩码：		11111111 11111111 11111111 00000000

也就是说，192.168.0.14仍是我们的例子网络中的成员，而192.168.1.2就不是了。 


广播地址是一个跟你的网络在同一个网段的IP地址，只是它的主机部分全部为1。你的网络中所有的主机都监听这个IP地址。它真正的用途是用来广播数据包。 
IP地址：		192      168      0         2

				11000000 10101000 00000000 00000010

广播：			11000000 10101000 00000000 11111111

为了能在互联网上冲浪，你必须知道是哪台主机在共享Internet连接。这台主机称为网关。由于它是一台普通主机，所以它有一个普通的IP地址（比如192.168.0.1）。 

前面我们陈述了每台主机拥有它自己的IP地址。为了能够通过域名（而不是IP地址）连到这台主机，你需要一种服务，以将一个域名（如dev.gentoo.org）翻译成一个IP地址（如64.5.62.82）。这种服务称为域名服务。你必须在/etc/resolv.conf中定义必要的域名服务器以享用这种服务。

某些情况下，你的网关也作为域名服务器提供服务。否则就必须加入ISP提供的域名服务器。 


比如google架设的服务器ip为8.8.8.8，但通过google解析相对比较慢，最好使用网关。

查看/etc/resolv.conf是否已经有配置好的nameserver

在ubuntu下设置dns:

在/etc/resolvconf/resolv.conf.d/base文件中添加：

nameserver 192.168.0.1

sudo resolvconf -u


参考:
<http://www.gentoo.org/doc/zh_cn/gentoo-x86-quickinstall.xml>

<http://www.gentoo.org/doc/en/handbook/handbook.xml>

<http://www.gentoo.org/doc/zh_cn/handbook/handbook-x86.xml?full=1#book_part1_chap4>
